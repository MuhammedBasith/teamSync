---
alwaysApply: true
description: Shared code style and architecture standards for TeamSync project
---

# ğŸ§­ Code Standards â€” Next.js (App Router) + TypeScript

This document defines the coding conventions and project structure rules for our Next.js + TypeScript application.  
Our goal is to maintain **clarity**, **consistency**, and **scalability** across both frontend and backend code.

---

## âš™ï¸ General Principles

- **Use TypeScript strictly.**  
  - Never use `any`.  
  - Use proper types and interfaces â€” prefer `type` for simple objects and `interface` for complex structures or public APIs.
  - Use `unknown` instead of `any` if typing is uncertain.

- **Keep components clean and focused.**  
  - No heavy business logic in React components.
  - Create custom hooks (`useSomething.ts`) for any reusable or data-related logic.

- **Prefer composition over complexity.**  
  - Avoid deeply nested conditionals or large files.
  - Extract utility functions and keep files concise and readable.

- **Follow functional purity.**  
  - Keep side effects contained (hooks, API routes).
  - Avoid shared mutable state.

- **Donot hallucinate or blindly write code.**  
  - always ask questions first before proceeding if you have any doubts
  - always refer to product-requirements.mdc and db-schema.mdc if you have any doubts about our goal or db structure dont assume fields or table will exisit always cross verify.

---

## ğŸ“ Folder & File Structure

### App Router Structure
```

src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (routes)/
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts
â”‚   â”œâ”€â”€ globals.css
â”‚   â””â”€â”€ layout.tsx
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ layout/
â”‚   â”œâ”€â”€ forms/
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”œâ”€â”€ useFetch.ts
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”œâ”€â”€ prisma.ts
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ formatDate.ts
â”‚   â”‚   â”œâ”€â”€ logger.ts
â”‚   â””â”€â”€ constants/
â”‚       â”œâ”€â”€ api.ts
â”‚       â”œâ”€â”€ routes.ts
â”‚
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ api.d.ts
â”‚   â”œâ”€â”€ user.d.ts
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ services/
â”œâ”€â”€ userService.ts
â”œâ”€â”€ authService.ts
â””â”€â”€ ...

````

### Rules:
- **`components/`** â€” purely presentational logic, no API or business logic.
- **`hooks/`** â€” one hook per feature/component if needed; encapsulate all async/data logic.
- **`lib/`** â€” shared helpers, utils, and constants.
- **`services/`** â€” backend-facing logic (e.g., database queries, 3rd-party integrations).
- **`types/`** â€” global or shared TypeScript definitions.
- **`app/api/`** â€” Next.js server routes. Should call `services/` and return standardized responses.

---

## ğŸ§© Component Rules

- Each component must be **functionally pure** and **typed**.
- File naming: `ComponentName.tsx`
- Props interface should be defined at the top:
  ```ts
  interface ButtonProps {
    label: string;
    onClick?: () => void;
  }

  export function Button({ label, onClick }: ButtonProps) {
    return <button onClick={onClick}>{label}</button>;
  }
````

* Avoid inline styling; use CSS Modules, Tailwind, or styled components.
* Each component should have **its own folder** if it has subcomponents or related hooks/styles:

  ```
  components/
  â””â”€â”€ Button/
      â”œâ”€â”€ Button.tsx
      â”œâ”€â”€ useButton.ts
      â””â”€â”€ index.ts
  ```

---

## ğŸª Custom Hook Standards

* Naming: Always start with `use`.
* Purpose: Encapsulate data fetching, form logic, or reusable state logic.
* Use Tanstack query to deal anything with data, we can create functions for that in services folders
* Keep hooks **stateless** â€” no side effects beyond what React allows.
* Example:

  ```ts
  import { useState, useEffect } from "react";

  export function useUsers() {
    const [users, setUsers] = useState<User[]>([]);

    useEffect(() => {
      fetch("/api/users")
        .then((res) => res.json())
        .then(setUsers);
    }, []);

    return { users };
  }
  ```

---

## ğŸ” Backend (API) Standards

* All backend logic lives under `app/api/` and `services/`.

* Keep API routes minimal â€” only handle request/response, validation, and call `services`.

* Example:

  ```ts
  // app/api/users/route.ts
  import { NextResponse } from "next/server";
  import { getAllUsers } from "@/services/userService";

  export async function GET() {
    const users = await getAllUsers();
    return NextResponse.json(users);
  }
  ```

* Example service:

  ```ts
  // services/userService.ts
  import prisma from "@/lib/db/prisma";

  export async function getAllUsers() {
    return prisma.user.findMany();
  }
  ```

* Validation should be done via **Zod** or **class-validator** before processing.

---

## ğŸ§± Naming Conventions

| Entity           | Convention                               | Example                  |
| ---------------- | ---------------------------------------- | ------------------------ |
| Component        | PascalCase                               | `UserCard.tsx`           |
| Hook             | camelCase (starts with use)              | `useUserData.ts`         |
| Utility Function | camelCase                                | `formatDate.ts`          |
| Type/Interface   | PascalCase with `Type` or `Props` suffix | `UserType`, `LoginProps` |
| API Route Folder | kebab-case                               | `/api/user-profile/`     |

---

## ğŸ§° Other Guidelines

* Use **ESLint** and **Prettier** â€” enforce consistent code style.
* Always handle errors gracefully (never throw raw errors).
* Commit messages follow **Conventional Commits** style:

  ```
  feat(scope): add user profile endpoint
  fix: resolve login hook bug
  refactor: clean up form validation
  ```

---

## âœ… Summary

âœ” Strict TypeScript, no `any`
âœ” Clean separation of frontend (components/hooks) and backend (services/api)
âœ” Reusable and testable logic
âœ” Scalable folder structure
âœ” Consistent naming and conventions

---

> â€œWrite code for humans first, machines second.â€

```

---
